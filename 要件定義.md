# 飲食店営業情報管理システム 要件定義書

## 1. システム概要

本システムは、飲食店向け卸売業者が配送ルートで収集した店舗情報（新規オープン、閉店、改装中など）を効率的に管理し、営業活動に活用するためのツールである。配送担当者がスマートフォンで撮影した写真と位置情報を簡単に共有でき、営業担当者がそれらの情報を一元管理・整理できる仕組みを提供する。

シンプルなPWA（Progressive Web App）とGoogleスプレッドシートを組み合わせた低コスト・低メンテナンスな実装で、専門的な開発知識がなくても運用可能なシステムを目指す。

## 2. 業務要件

### 2.1 現状の課題

- 配送中に発見した店舗情報をチャットで共有しているが、情報が流れてしまい整理できていない
- 同じ場所に複数回足を運ぶケースがあり、優先順位付けが必要
- 情報が一元管理されておらず、営業活動に十分活用できていない

### 2.2 対象ユーザー

- 配送担当者：都内を中心に約50ルートを担当、ITリテラシーは比較的低い
- 営業担当者：収集された情報を整理し営業活動に活用する

### 2.3 ビジネス目標

- 新規開店・閉店情報の迅速な把握と活用
- 営業活動の効率化と優先順位付け
- 情報共有の円滑化と一元管理

## 3. 機能要件

### 3.1 PWA（配送担当者向け）

#### 3.1.1 基本機能

- **即時アクセス**: ログイン不要で起動後すぐに利用可能
- **ルート選択機能**: 簡単なドロップダウンからルートを選択するのみ
- 写真撮影機能
- 位置情報の自動取得
- 簡易カテゴリ選択（新規オープン/閉店/改装中/その他）
- コメント入力機能（任意）
- ワンタップデータ送信機能

#### 3.1.2 非機能要件

- **超簡易UI設計**: 最小限の操作ステップ（10〜15秒以内で完了可能）
- **ホーム画面追加促進**: 初回アクセス時にホーム画面への追加を誘導
- **QRコード活用**: 車内などにQRコードを設置し、即座にアクセス可能に
- オフライン対応：一時的な通信不良でもデータを保持
- 低スペックスマートフォンでも動作する軽量設計
- 写真の自動圧縮機能：データ容量の最適化

#### 3.1.3 セキュリティ要件（簡易化）

- ルート識別のための簡易コード（数字4桁程度・全担当者共通）
- 投稿者を特定する機能は不要
- 投稿時の確認画面でのみ誤送信防止

### 3.2 Googleスプレッドシート（営業担当者向け）

#### 3.2.1 基本機能

- 基本情報の表示（日時、位置情報、カテゴリ、コメント、ルート情報）
- 写真の直接表示（IMAGE関数によるサムネイル表示）
- 住所情報の表示（緯度・経度から自動変換）
- ステータス管理機能（未対応/対応中/商談中/成約/対象外）
- 優先度管理機能（高/中/低）
- フィルタリング・ソート機能

#### 3.2.2 拡張機能

- データの簡易分析（地域別・カテゴリ別・ルート別集計など）
- 条件付き書式による視覚的管理
- 定期レポート生成

## 4. 技術要件

### 4.1 PWA実装

- HTML5/CSS/JavaScript を使用
- 位置情報API活用
- カメラアクセス機能
- 画像圧縮処理（クライアントサイド）
- Google Apps Script WebApp へのデータ送信
- **Service Worker**: オフライン対応とキャッシュ制御

### 4.2 データ処理・保存

- Google Apps Script による処理
- Googleドライブによる画像保存
- Google Maps Platform API による位置情報→住所変換
- スプレッドシートへのデータ記録
- **定期的な画像圧縮・アーカイブ処理**: ストレージ容量管理

### 4.3 セキュリティ要件

- PWA側は最小限のセキュリティ設定（簡易アクセスコードのみ）
- Google側（スプレッドシート・ドライブ）は適切なアクセス権限設定
- 写真データの共有範囲限定

## 5. 制約条件

### 5.1 予算・コスト

- 可能な限り無料サービスのみを使用
- Google無料アカウントの容量制限（15GB）を考慮した設計
- **画像自動圧縮・削除ルール**: 3ヶ月以上経過した画像の自動圧縮または削除

### 5.2 技術的制約

- 専門開発者不在のため、複雑なカスタム開発は避ける
- 既存のサービス・APIを最大限活用
- スプレッドシートのパフォーマンス制限を考慮（大量の画像表示時）
- **低速回線対応**: 3G環境でも問題なく動作する最適化

## 6. 運用・保守要件

### 6.1 日常運用

- データの定期的なバックアップ
- 古いデータのアーカイブ方法
- 写真データの容量管理（自動圧縮・削除ルール適用）

### 6.2 サポート体制

- ユーザーからの質問・問題報告の受付方法
- 改善要望の収集方法
- **非常時の代替手段**: システム障害時の情報共有方法の策定

## 7. 成功指標

- 情報収集の所要時間削減（目標：1件あたり15秒以内の操作時間）
- 情報収集から営業活動開始までのリードタイム短縮
- 収集情報の活用率向上
- 新規取引先獲得数の増加
- ユーザー（配送担当者・営業担当者）の満足度

## 8. UI/UX設計方針

### 8.1 PWA画面フロー

1. **初期画面**: ルート選択ドロップダウンのみ表示
2. **撮影画面**: ルート選択後すぐにカメラ起動
3. **情報入力画面**: 写真撮影後に簡易カテゴリ選択とコメント入力
4. **送信確認画面**: ワンタップで送信完了

### 8.2 配慮事項

- **最小限の入力項目**: 必須入力は「ルート選択」と「写真」のみ
- **大きなボタン設計**: 運転手でも操作しやすい視認性の高いUI
- **エラー表示の簡略化**: 通信エラー時は自動リトライと簡潔なメッセージ
- **操作ステップの可視化**: 現在のステップを常に表示

## 9. 配送業務との両立性

- 配送業務の妨げにならない最小限の操作設計
- 車両停止中の短時間で完結する情報登録フロー
- ホーム画面アイコン登録によるワンタップ起動
- バックグラウンド送信機能（撮影・入力後すぐに配送業務に戻れる）